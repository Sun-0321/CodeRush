jQuery(document).foundation();$(document).ready(function(){var t={all:"cumulative"};var e=Drupal.settings["date_versus_rating"];var a=Drupal.settings["provisional_rating_contest_limit"];var r=[];var n=[];var s=Drupal.settings["user_initial_ratings"];var i=function(t,e,i,o,l){var c=function(t){var e=t.length;var a=[];var r;for(var n=0;n<e;n++){r={};if(!t[n]["reason"]){r=[Date.UTC(t[n]["getyear"],t[n]["getmonth"],t[n]["getday"]),parseInt(t[n]["rating"])];a.push(r)}else{r={x:Date.UTC(t[n]["getyear"],t[n]["getmonth"],t[n]["getday"]),y:parseInt(t[n]["rating"]),marker:{symbol:"triangle-down"}};a.push(r)}}if(a==[]){a.push([Date.UTC(2008,1,1),0])}return a};var h=c(e);var d;var f;if(l){d={type:"datetime",dateTimeLabelFormats:{day:"%Y",week:"%Y",month:"%Y",year:"%Y"},title:{text:"Year"}};f={gridLineDashStyle:"longdash",title:{text:"Rating"}}}else{d={type:"datetime",dateTimeLabelFormats:{day:"%Y",week:"%Y",month:"%Y",year:"%Y"},title:{text:"Year",margin:15,style:{"font-weight":"bold","font-size":"13px",color:"#4a4a4a"}}};f={gridLineDashStyle:"longdash",title:{text:"Rating",margin:15,style:{"font-weight":"bold","font-size":"13px",color:"#4a4a4a"}},plotBands:[{color:"#DADADA",from:0,to:1400},{color:"#C9E0CA",from:1400,to:1600},{color:"#CEDAF3",from:1600,to:1800},{color:"#DBD2DE",from:1800,to:2e3},{color:"#FFF0C2",from:2e3,to:2200},{color:"#FFE3C8",from:2200,to:2500},{color:"#F1C1C8",from:2500,to:5e4}]}}var g=function(t){var e=t.series[0].points.length-1;if(t.series[0].points[e]){t.series[0].points[e].select()}};var p=function(t){if(t.series[0].data.length<1){$(t.renderTo).siblings().remove();$(t.renderTo).html('<img src="https://cdn.codechef.com/sites/all/themes/abessive/images/no-participation-graph.jpg" alt="No Participation">')}};var u=function(t,e){t.update({marker:{fillColor:e,states:{hover:{fillColor:e,lineColor:e}}}})};var m=function(t,e,a){var r=e[t].penalised_in;$.each(r,function(t,r){$.each(e,function(t,e){if(e.code==r){var n=a.series.data[t];u(n,"red")}})})};var v=function(t,e){$.each(t,function(t,a){var r=e.series.data[t];u(r,"#000")})};var y=Highcharts.chart(t,{credits:{enabled:false},chart:{polar:true,type:"line",zoomType:"xy"},plotOptions:{line:{lineWidth:1,color:"#000"},series:{pointStart:e.length>0?e[0].getyear:2008,allowPointSelect:true,cursor:"pointer",marker:{enabled:true,states:{select:{enabled:true}}},states:{hover:{enabled:true,lineWidth:1}},point:{events:{click:function(){var t=this;var r=this.index;var n=0;if(e.length>0){var c=this.y;var h="all";if(l){h+="-school"}if(r<a-1){c+="?";$("#actual-rating-status-"+h).hide();$("#provisional-rating-status-"+h).show()}else{$("#actual-rating-status-"+h).show();$("#provisional-rating-status-"+h).hide()}$("#"+i+" .rank-stats .rating").html(c+' (<span class="rating-difference"></span>)');$("#"+i+" .rank-stats .global-rank").text(e[r].rank);$("#"+i+" .rank-stats .contest-name").html('<a href="https://www.codechef.com/'+e[r].code+'">'+e[r].name+'</a><span class="time"></span>');$("#"+i+" .rank-stats .contest-name .time").text("("+e[r].end_date+")");if(e[r].reason){m(r,e,t);$("#"+i+" .rank-stats .cheated-contest").text(e[r].reason).parent().show()}else{v(e,t);$("#"+i+" .rank-stats .cheated-contest").parent().hide()}if(r==0){n=e[r].rating-s[o];$("#"+i+" .rank-stats .rating-difference").text((n<0?"":"+")+n)}else{n=e[r].rating-e[r-1].rating;$("#"+i+" .rank-stats .rating-difference").text((n<0?"":"+")+n)}if(!l){$("#"+i+" .rank-stats .left:first-child").css("background-color",e[r].color)}}}}}}},title:{text:null},tooltip:{enabled:false},xAxis:d,yAxis:f,series:[{name:"Rating",data:h,lineWidth:1}]},function(t){g(t);p(t)});if(o=="school"){n.push(y)}else{r.push(y)}};$.each(t,function(t,a){i(a+"-graph",e[t],a,t,false);if(e["all_school"].length>0){i(a+"-graph-school",e[t+"_school"],a+"-school",t+"_school",true)}})});